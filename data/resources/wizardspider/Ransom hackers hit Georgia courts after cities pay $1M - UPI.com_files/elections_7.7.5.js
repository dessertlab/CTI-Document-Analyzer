define("elections",["module","jquery","page","utils","jquery-utils"],function(t,n,e,a){const r={name:t.id,class:"."+t.id};a.broadcast(r.name,"loaded"),a.createModule(r.name,function(t){const a=this;this.$el=t,this.module=r,this.groupId=t[0].dataset.groupId,this.getAllResultsByGroupIdAndLocationId=function(t,e){n.ajax({url:`/ajax/elections/getAllResultsByGroupIdAndLocationId/${t}/`+e,type:"GET",dataType:"json",success:function(t){let e=a.getElements("result-template").html();a.getElements("results-list").html(""),t.forEach(t=>{a.getElements("results-list").append(e);let l=a.getElements("result").last(),d=(l.find(r.class+"__result-title").html(t.Title),l.find(r.class+"__result-precinct").html(`Precincts: ${t.PrecinctsReporting.toLocaleString()} / ${t.PrecinctsTotal.toLocaleString()} (${t.PrecinctsReportingPercent}% reporting)`),l.find(r.class+"__result-total").html("Vote Total: "+t.VotesTotal.toLocaleString()),l.find(r.class+"__result-updated").html("Last Updated: "+t.Updated),l.find(r.class+"__candidates").html()),c=(l.find(r.class+"__candidates").html(""),0);t.Candidates.forEach(t=>{t.VotePercent>c&&(c=t.VotePercent)}),t.Candidates.forEach(t=>{var e=t.FirstName&&t.LastName?" ":"",e=t.FirstName+e+t.LastName,a=t.Party?`&nbsp;(${t.Party})`:"",n=""===t.Party?"i":t.Party.toLowerCase(),s=!0===t.Incumbent?"*":"",i=(l.find(r.class+"__candidates").append(d),l.find(r.class+"__candidate").last());i.find(r.class+"__candidate-name").html(e+a+s),t.Winner&&i.find(r.class+"__candidate-name-wrap").addClass(r.name+"__candidate-name-wrap_winner_true"),i.find(r.class+"__candidate-percent").html(`${"VotePercentDecimal"in t?t.VotePercentDecimal:t.VotePercent}%`),i.find(r.class+"__candidate-votes").html(t.Votes.toLocaleString()),i.find(r.class+"__candidate-bar").addClass(r.name+"__candidate-bar_color_"+n),i.find(r.class+"__candidate-bar").find("progress").text(` ${t.VotePercent}% `),i.find(r.class+"__candidate-bar").find("progress").attr("value",t.VotePercent),i.find(r.class+"__candidate-bar").find("progress").attr("max",c)})})}})},this.applyFilter=function(t){a.getElements("result").each(function(){0<=n(this).text().toLowerCase().indexOf(t)?n(this).show():n(this).hide()})},this.setupEventHandlers=function(){t.on("keyup",".elections__filter",function(){var t=a.getElements("filter").val().toString().toLowerCase();a.applyFilter(t)}),t.on("change",".elections__locations",function(){var t=a.getElements("locations").val();a.getAllResultsByGroupIdAndLocationId(a.groupId,t),a.getElements("filter").val(""),a.applyFilter("")})},this.init=function(){a.broadcast("init"),a.setupEventHandlers(),a.broadcast("ready")}})});
//# sourceMappingURL=elections_7.7.5.js.map